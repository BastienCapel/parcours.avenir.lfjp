<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Parcours Avenir — Lycée Français Jean-Prince</title>
    <style>
      :root {
        color-scheme: light;
        font-family: "Inter", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        --color-primary: #003366;
        --color-accent: #f5f7fb;
        --shadow-soft: 0 12px 32px rgba(15, 35, 95, 0.08);
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: #f2f4f8;
        color: #13294b;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      header {
        position: sticky;
        top: 0;
        z-index: 30;
        backdrop-filter: blur(18px);
        background: rgba(255, 255, 255, 0.9);
        border-bottom: 1px solid rgba(19, 41, 75, 0.08);
      }

      .top-bar {
        margin: 0 auto;
        padding: 1rem 1.5rem;
        max-width: 1080px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1.5rem;
      }

      .brand {
        font-size: 1rem;
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--color-primary);
      }

      nav {
        display: flex;
        gap: 0.75rem;
      }

      .nav-link {
        padding: 0.45rem 0.9rem;
        border-radius: 999px;
        font-size: 0.95rem;
        font-weight: 500;
        transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
      }

      .nav-link[aria-current="page"] {
        background: var(--color-primary);
        color: #fff;
        box-shadow: 0 10px 20px rgba(0, 30, 75, 0.18);
      }

      .nav-link:not([aria-current="page"]):hover {
        background: rgba(0, 51, 102, 0.08);
        transform: translateY(-1px);
      }

      main {
        margin: 0 auto;
        padding: 2.5rem 1.5rem 4rem;
        max-width: 1080px;
      }

      .route {
        display: none;
        animation: fade 0.35s ease;
      }

      .route.active {
        display: block;
      }

      @keyframes fade {
        from {
          opacity: 0;
          transform: translateY(12px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .hero-card {
        background: linear-gradient(135deg, #ffffff 0%, #f4f6fb 80%);
        border-radius: 32px;
        padding: 3.5rem clamp(1.5rem, 4vw, 3.5rem);
        box-shadow: var(--shadow-soft);
        display: grid;
        gap: 1.25rem;
      }

      .hero-card h1 {
        margin: 0;
        font-size: clamp(2rem, 5vw, 2.8rem);
        color: var(--color-primary);
        letter-spacing: -0.02em;
      }

      .hero-card p {
        margin: 0;
        font-size: 1.05rem;
        line-height: 1.75;
        color: rgba(19, 41, 75, 0.82);
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-top: 0.75rem;
      }

      .chip {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.55rem 0.9rem;
        border-radius: 999px;
        font-size: 0.9rem;
        font-weight: 500;
        background: rgba(0, 51, 102, 0.08);
        color: var(--color-primary);
      }

      .cta {
        margin-top: 1.5rem;
        display: inline-flex;
        align-items: center;
        gap: 0.65rem;
        padding: 0.85rem 1.6rem;
        border-radius: 999px;
        background: var(--color-primary);
        color: #fff;
        font-weight: 600;
        letter-spacing: 0.01em;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 14px 30px rgba(0, 35, 90, 0.22);
      }

      .cta:hover {
        transform: translateY(-2px);
        text-decoration: none;
      }

      .home-sections {
        margin-top: 3rem;
        display: grid;
        gap: 2rem;
      }

      .home-card {
        background: #fff;
        border-radius: 28px;
        padding: 2rem;
        box-shadow: 0 16px 40px rgba(15, 35, 95, 0.12);
        display: grid;
        gap: 1rem;
      }

      .home-card h2 {
        margin: 0;
        font-size: 1.4rem;
        color: var(--color-primary);
      }

      .home-card ul {
        margin: 0;
        padding-left: 1.25rem;
        display: grid;
        gap: 0.65rem;
        color: rgba(19, 41, 75, 0.82);
      }

      .portrait {
        display: grid;
        gap: 0.75rem;
      }

      .portrait strong {
        font-size: 1.1rem;
      }

      .orientation-header {
        background: #fff;
        border-radius: 28px;
        padding: 2.5rem clamp(1.25rem, 4vw, 3rem);
        box-shadow: var(--shadow-soft);
        display: grid;
        gap: 1.25rem;
      }

      .orientation-header h1 {
        margin: 0;
        font-size: clamp(2rem, 5vw, 2.6rem);
        color: var(--color-primary);
      }

      .orientation-header p {
        margin: 0;
        font-size: 1.05rem;
        color: rgba(19, 41, 75, 0.82);
        line-height: 1.7;
      }

      .toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: center;
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .toolbar button,
      .toolbar select,
      .toolbar input {
        border-radius: 999px;
        border: 1px solid rgba(19, 41, 75, 0.16);
        background: #fff;
        padding: 0.55rem 1rem;
        font: inherit;
        color: inherit;
      }

      .toolbar button {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        cursor: pointer;
      }

      .toolbar button.active {
        background: var(--color-primary);
        color: #fff;
        border-color: transparent;
        box-shadow: 0 12px 28px rgba(0, 51, 102, 0.18);
      }

      .toolbar input {
        min-width: min(280px, 60vw);
      }

      .view {
        margin-top: 2.5rem;
      }

      .timeline {
        display: grid;
        gap: 2.5rem;
      }

      .timeline-phase {
        background: #fff;
        border-radius: 24px;
        padding: 1.75rem 1.75rem 2rem;
        border: 1px solid rgba(19, 41, 75, 0.08);
      }

      .timeline-phase h2 {
        margin: 0 0 1.25rem;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .timeline-items {
        display: grid;
        gap: 1.25rem;
        position: relative;
        padding-left: 1.5rem;
      }

      .timeline-items::before {
        content: "";
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0.25rem;
        width: 2px;
        background: rgba(19, 41, 75, 0.12);
      }

      .timeline-card {
        background: #fdfdff;
        border-radius: 20px;
        padding: 1.25rem 1.5rem;
        box-shadow: 0 12px 30px rgba(15, 35, 95, 0.08);
        position: relative;
      }

      .timeline-card::before {
        content: "";
        position: absolute;
        top: 1.4rem;
        left: -1.65rem;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--dot, var(--color-primary));
        box-shadow: 0 0 0 6px rgba(0, 51, 102, 0.12);
      }

      .timeline-card h3 {
        margin: 0;
        font-size: 1.1rem;
      }

      .timeline-meta {
        margin-top: 0.5rem;
        font-size: 0.9rem;
        color: rgba(19, 41, 75, 0.68);
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem 1.1rem;
      }

      .timeline-meta span {
        display: inline-flex;
        gap: 0.35rem;
        align-items: center;
      }

      .timeline-meta strong {
        font-weight: 600;
      }

      .table-wrapper {
        border-radius: 24px;
        overflow: hidden;
        box-shadow: 0 18px 40px rgba(15, 35, 95, 0.12);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: #fff;
      }

      thead {
        background: var(--color-accent);
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.08em;
      }

      th,
      td {
        padding: 0.95rem 1.25rem;
        text-align: left;
        border-bottom: 1px solid rgba(19, 41, 75, 0.08);
      }

      tbody tr:hover {
        background: rgba(0, 51, 102, 0.05);
      }

      footer {
        margin-top: 4rem;
        padding: 2rem 0 3rem;
        font-size: 0.85rem;
        color: rgba(19, 41, 75, 0.6);
        text-align: center;
      }

      @media (max-width: 720px) {
        .hero-card,
        .home-card,
        .orientation-header {
          border-radius: 22px;
          padding: 1.75rem;
        }

        .toolbar {
          flex-direction: column;
          align-items: stretch;
        }

        .toolbar input {
          min-width: 100%;
        }

        th,
        td {
          padding: 0.75rem 0.85rem;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="top-bar">
        <div class="brand">Parcours Avenir · LFJP</div>
        <nav aria-label="Navigation principale">
          <a class="nav-link" href="#/" data-route="home">Accueil</a>
          <a class="nav-link" href="#/3eme" data-route="3eme">Étape 3<sup>e</sup></a>
        </nav>
      </div>
    </header>

    <main>
      <section id="route-home" class="route active" aria-labelledby="home-title">
        <article class="hero-card">
          <h1 id="home-title">Construire son avenir en confiance</h1>
          <p>
            Au Lycée Français Jean-Prince, le Parcours Avenir accompagne chaque collégien et lycéen dans la découverte de soi,
            des métiers et des formations. Ce cheminement personnalisé est coordonné par <strong>Mme D’Aquino</strong>, professeure
            référente à l’information et à l’orientation (PRIO), qui mobilise toute l’équipe éducative pour ouvrir le champ des
            possibles et sécuriser les choix d’orientation.
          </p>
          <div class="chips" role="list">
            <span class="chip">Connaissance de soi</span>
            <span class="chip">Immersion professionnelle</span>
            <span class="chip">Projet d’orientation</span>
            <span class="chip">Accompagnement individualisé</span>
          </div>
          <a class="cta" href="#/3eme">Découvrir l’étape 3<sup>e</sup> du Parcours</a>
        </article>

        <div class="home-sections">
          <article class="home-card portrait">
            <h2>Le mot de notre PRIO</h2>
            <p>
              «&nbsp;Je crois profondément au pouvoir de l’expérience et de la curiosité. Chaque élève doit pouvoir tester, explorer
              et se projeter pour bâtir un avenir éclairé. Mon rôle est de créer ces occasions, d’écouter et de guider avec bienveillance.&nbsp;»
            </p>
            <strong>Mme Silvia D’Aquino — Professeure référente à l’information et à l’orientation</strong>
          </article>

          <article class="home-card">
            <h2>Un parcours en quatre ambitions</h2>
            <ul>
              <li>Se découvrir pour mieux identifier ses talents, ses envies et les valeurs qui donnent du sens.</li>
              <li>Explorer le monde professionnel grâce à des rencontres, forums et stages encadrés par nos équipes.</li>
              <li>Clarifier son projet d’orientation avec des outils, des entretiens individualisés et l’appui des familles.</li>
              <li>Valoriser ses réussites et formaliser un dossier solide pour sécuriser les choix d’orientation post‑3<sup>e</sup>.</li>
            </ul>
          </article>

          <article class="home-card">
            <h2>Notre accompagnement</h2>
            <ul>
              <li>Des temps forts animés par Mme D’Aquino et les professeurs principaux pour baliser chaque étape de l’année.</li>
              <li>Une veille continue sur les formations, les métiers et les dispositifs institutionnels pour informer les familles.</li>
              <li>Des outils numériques et pédagogiques pour suivre son parcours et préparer sereinement l’orientation.</li>
            </ul>
          </article>
        </div>
      </section>

      <section id="route-3eme" class="route" aria-labelledby="orientation-title">
        <article class="orientation-header">
          <h1 id="orientation-title">Film annuel de l’orientation — 3<sup>e</sup></h1>
          <p>
            Toute l’année, Mme D’Aquino coordonne un programme riche pour accompagner chaque élève de 3<sup>e</sup> dans son projet.
            Retrouvez les actions clés, leurs objectifs et les personnes ressources mobilisées. Utilisez la frise chronologique
            ou le tableau pour préparer vos rendez-vous et suivre l’avancement.
          </p>
          <div class="toolbar" role="group" aria-label="Options d’affichage">
            <button type="button" data-view="timeline" class="active">Frise chronologique</button>
            <button type="button" data-view="table">Vue tableau</button>
            <label>
              <span class="sr-only">Filtrer par phase</span>
              <select data-role="phase">
                <option value="all">Toutes les phases</option>
              </select>
            </label>
            <input type="search" data-role="search" placeholder="Rechercher une activité, un lieu ou un acteur…" aria-label="Recherche" />
            <button type="button" data-role="print">Imprimer / PDF</button>
            <a class="nav-link" href="#/" data-route="home" style="border-radius: 16px">Retour à l’accueil</a>
          </div>
        </article>
        <div id="orientation-view" class="view" aria-live="polite"></div>
      </section>
    </main>

    <footer>
      Lycée Français Jean-Prince — Parcours Avenir · Actualisé automatiquement à partir du canevas pédagogique.
    </footer>

    <script>
      const ROUTES = {
        HOME: "home",
        ORIENTATION_3E: "3eme",
      };

      const DATA = [
        { id: "enjeux-3e", phase: "Mieux se connaître", titre: "Présentation des enjeux de la 3e", details: "Objectifs de l'année, calendrier de l'orientation, attentes et livrables.", periode: "Septembre", ordre: 20250910, acteurs: ["Professeurs principaux", "Mme D’Aquino", "Élèves"], lieu: "LFJP — Vie de classe" },
        { id: "bilan-competences", phase: "Mieux se connaître", titre: "Bilans de compétences (entretiens individuels)", details: "Identifier compétences scolaires et extra-scolaires. Aider à amorcer le projet.", periode: "Toute l'année", ordre: 20250915, acteurs: ["Mme D’Aquino", "Élèves"], lieu: "Bureau orientation S9 / AP" },
        { id: "tests-interets", phase: "Mieux se connaître", titre: "Goûts et intérêts (tests ONISEP, Kledou)", details: "Exploration des intérêts et qualités. Restitution et pistes de métiers.", periode: "Septembre–Novembre", ordre: 20250920, acteurs: ["Mme D’Aquino", "Élèves"], lieu: "Bureau orientation / AP" },
        { id: "autoportrait-slam", phase: "Mieux se connaître", titre: "Ateliers autoportrait — projet “Échos slamés de nos Avenirs”", details: "Production artistique avec Français/Arts/Musique et artistes locaux.", periode: "Septembre–Novembre", ordre: 20250925, acteurs: ["Français", "Arts", "Musique", "Artistes locaux"], lieu: "LFJP" },
        { id: "definition-parcours", phase: "Mieux se connaître", titre: "Définir le Parcours Avenir (brainstorming + oraux)", details: "Construction partagée des attendus et jalons de l'année.", periode: "Septembre–Octobre", ordre: 20250926, acteurs: ["Élèves", "Professeurs principaux", "Mme D’Aquino"], lieu: "Heure de vie de classe" },
        { id: "prepa-stage", phase: "Mieux se connaître", titre: "Préparation et recherche du stage découverte", details: "Lettre de motivation, ciblage des entreprises, candidatures, simulation d'entretiens.", periode: "Septembre–Novembre", ordre: 20250927, acteurs: ["Mme D’Aquino", "Élèves"], lieu: "Bureau orientation / AP" },
        { id: "forum-metiers", phase: "Mieux se connaître", titre: "Forum des Métiers (obligatoire) + restitution Slam", details: "Rencontres avec professionnels. Valorisation des productions.", periode: "29 novembre", ordre: 20251129, acteurs: ["Professionnels", "Professeurs principaux", "Mme D’Aquino"], lieu: "LFJP" },
        { id: "info-parents", phase: "Mieux se connaître", titre: "Info parents — voies post‑3e, calendrier, procédure", details: "Présentation Bac général / Bac pro / CAP. Calendrier et affectation.", periode: "11 novembre", ordre: 20251111, acteurs: ["Professeurs principaux", "Mme D’Aquino"], lieu: "LFJP" },
        { id: "info-eleves", phase: "Mieux se connaître", titre: "Info élèves — voies post‑3e, calendrier, procédure", details: "Information personnalisée. Questions-réponses autour des vœux et de la procédure.", periode: "Novembre", ordre: 20251115, acteurs: ["Mme D’Aquino", "Élèves"], lieu: "Salle polyvalente" },
        { id: "stage-decouverte", phase: "Plonger dans le monde professionnel", titre: "Stage d'observation — Semaine de découverte", details: "Immersion obligatoire dans une entreprise, restitution orale et écrite.", periode: "9 au 13 février", ordre: 20250209, acteurs: ["Élèves", "Tuteurs", "Mme D’Aquino"], lieu: "Entreprises partenaires" },
        { id: "coaching-entretiens", phase: "Plonger dans le monde professionnel", titre: "Coaching entretiens et posture professionnelle", details: "Jeux de rôle, feedback personnalisé, préparation aux codes de l'entreprise.", periode: "Janvier", ordre: 20250115, acteurs: ["Mme D’Aquino", "Partenaires"], lieu: "Centre de documentation" },
        { id: "visites-lycees", phase: "Finaliser son projet", titre: "Visites d’établissements post‑3e", details: "Découverte des filières générales, technologiques et professionnelles.", periode: "Mars", ordre: 20250310, acteurs: ["Mme D’Aquino", "Élèves", "Familles"], lieu: "Lycées partenaires" },
        { id: "forums-formation", phase: "Plonger dans le monde professionnel", titre: "Forums des formations et mini-stages", details: "Présentation des filières par des intervenants et anciens élèves.", periode: "Février–Mars", ordre: 20250301, acteurs: ["Anciens", "Mme D’Aquino", "Partenaires"], lieu: "LFJP / établissements partenaires" },
        { id: "choix-orientation", phase: "Finaliser son projet", titre: "Construction des vœux d’orientation", details: "Analyse des bulletins, échanges tripartites, formalisation des intentions.", periode: "Mars–Avril", ordre: 20250401, acteurs: ["Professeurs principaux", "Mme D’Aquino", "Familles", "Élèves"], lieu: "LFJP" },
        { id: "oraux-projet", phase: "Finaliser son projet", titre: "Oraux de projet personnel", details: "Présentation argumentée du projet devant un jury interne.", periode: "Mai", ordre: 20250515, acteurs: ["Équipe pédagogique", "Mme D’Aquino"], lieu: "LFJP" },
        { id: "parcoursup-initiation", phase: "Se projeter dans l’avenir", titre: "Initiation à Parcoursup et aux lycées français du monde", details: "Anticiper les démarches du lycée, découvrir les formations à l’international.", periode: "Mai", ordre: 20250516, acteurs: ["Mme D’Aquino", "Proviseur"], lieu: "Salle multimédia" },
        { id: "eval-stage", phase: "Plonger dans le monde professionnel", titre: "Évaluation et valorisation du stage", details: "Bilans écrits, retour d’expérience, capitalisation dans le dossier Parcours Avenir.", periode: "Mars", ordre: 20250320, acteurs: ["Tuteurs", "Professeurs principaux", "Mme D’Aquino"], lieu: "LFJP" },
        { id: "mini-entreprise", phase: "Plonger dans le monde professionnel", titre: "Atelier mini-entreprise", details: "Découverte de l’entrepreneuriat et du travail en équipe.", periode: "Décembre", ordre: 20251201, acteurs: ["Mme D’Aquino", "Intervenants extérieurs"], lieu: "Salle polyvalente" },
        { id: "rdv-individuels", phase: "Finaliser son projet", titre: "Entretiens individuels familles", details: "Point d’étape personnalisé pour sécuriser le passage en Seconde.", periode: "Avril", ordre: 20250415, acteurs: ["Mme D’Aquino", "Familles", "Élèves"], lieu: "Bureau d’orientation" },
        { id: "suivi-affectation", phase: "Se projeter dans l’avenir", titre: "Suivi des affectations et dossier lycée", details: "Accompagnement administratif et vérification des dossiers d’inscription.", periode: "Juin", ordre: 20250610, acteurs: ["Mme D’Aquino", "Familles"], lieu: "Administration" },
        { id: "portfolio", phase: "Se projeter dans l’avenir", titre: "Constitution du portfolio Parcours Avenir", details: "Rassembler productions, bilans et attestations dans un dossier numérique.", periode: "Tout au long de l’année", ordre: 20251220, acteurs: ["Élèves", "Mme D’Aquino"], lieu: "Espace numérique de travail" }
      ];

      const PHASES = [
        { key: "Mieux se connaître", color: "#fde5e5" },
        { key: "Plonger dans le monde professionnel", color: "#e5f2ff" },
        { key: "Finaliser son projet", color: "#e9f8ef" },
        { key: "Se projeter dans l’avenir", color: "#f8f0ff" },
      ];

      function updatePhaseOptions(select) {
        PHASES.forEach((phase) => {
          const option = document.createElement("option");
          option.value = phase.key;
          option.textContent = phase.key;
          select.append(option);
        });
      }

      function filterData({ view, searchTerm, phase }) {
        const term = (searchTerm || "").trim().toLowerCase();
        return DATA.filter((item) => {
          const matchesPhase = phase === "all" || item.phase === phase;
          if (!matchesPhase) return false;
          if (!term) return true;
          const haystack = [item.titre, item.details, item.periode, item.lieu, item.phase, item.acteurs.join(" ")]
            .join(" ")
            .toLowerCase();
          return haystack.includes(term);
        }).sort((a, b) => a.ordre - b.ordre);
      }

      function renderTimeline(items) {
        const grouped = items.reduce((map, item) => {
          if (!map[item.phase]) map[item.phase] = [];
          map[item.phase].push(item);
          return map;
        }, {});
        const fragment = document.createDocumentFragment();
        Object.entries(grouped).forEach(([phase, list]) => {
          const card = document.createElement("section");
          card.className = "timeline-phase";
          const color = PHASES.find((p) => p.key === phase)?.color || "#dde6ff";
          card.innerHTML = `
            <h2><span style="display:inline-block;width:14px;height:14px;border-radius:50%;background:${color};box-shadow:0 0 0 4px rgba(0,0,0,0.05);"></span>${phase}</h2>
            <div class="timeline-items"></div>
          `;
          const container = card.querySelector(".timeline-items");
          list.forEach((item) => {
            const article = document.createElement("article");
            article.className = "timeline-card";
            article.style.setProperty("--dot", color);
            article.innerHTML = `
              <h3>${item.titre}</h3>
              <p>${item.details}</p>
              <div class="timeline-meta">
                <span><strong>Période :</strong> ${item.periode}</span>
                <span><strong>Acteurs :</strong> ${item.acteurs.join(", ")}</span>
                <span><strong>Lieu :</strong> ${item.lieu}</span>
              </div>
            `;
            container.append(article);
          });
          fragment.append(card);
        });
        return fragment;
      }

      function renderTable(items) {
        const wrapper = document.createElement("div");
        wrapper.className = "table-wrapper";
        const rows = items
          .map(
            (item) => `
              <tr>
                <td>${item.phase}</td>
                <td>${item.periode}</td>
                <td>${item.titre}</td>
                <td>${item.details}</td>
                <td>${item.acteurs.join(", ")}</td>
                <td>${item.lieu}</td>
              </tr>
            `
          )
          .join("");
        wrapper.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>Phase</th>
                <th>Période</th>
                <th>Intitulé</th>
                <th>Objectifs</th>
                <th>Acteurs clés</th>
                <th>Lieu</th>
              </tr>
            </thead>
            <tbody>${rows || `<tr><td colspan="6">Aucun résultat ne correspond à votre recherche.</td></tr>`}</tbody>
          </table>
        `;
        return wrapper;
      }

      function setupOrientation() {
        const section = document.getElementById("route-3eme");
        const viewContainer = document.getElementById("orientation-view");
        const buttons = section.querySelectorAll('button[data-view]');
        const searchInput = section.querySelector('[data-role="search"]');
        const phaseSelect = section.querySelector('[data-role="phase"]');
        const printButton = section.querySelector('[data-role="print"]');

        updatePhaseOptions(phaseSelect);

        const state = {
          view: "timeline",
          searchTerm: "",
          phase: "all",
        };

        function render() {
          viewContainer.innerHTML = "";
          const filtered = filterData(state);
          const fragment = state.view === "timeline" ? renderTimeline(filtered) : renderTable(filtered);
          viewContainer.append(fragment);
        }

        buttons.forEach((button) => {
          button.addEventListener("click", () => {
            state.view = button.dataset.view;
            buttons.forEach((btn) => btn.classList.toggle("active", btn === button));
            render();
          });
        });

        searchInput.addEventListener("input", () => {
          state.searchTerm = searchInput.value;
          render();
        });

        phaseSelect.addEventListener("change", () => {
          state.phase = phaseSelect.value;
          render();
        });

        printButton.addEventListener("click", () => {
          window.print();
        });

        render();
      }

      function getRouteFromHash(hash) {
        const normalized = (hash || "").replace(/^#\/?/, "").toLowerCase();
        if (normalized.startsWith("3")) return ROUTES.ORIENTATION_3E;
        return ROUTES.HOME;
      }

      function navigate(hash) {
        const route = getRouteFromHash(hash);
        document.title =
          route === ROUTES.HOME
            ? "Parcours Avenir — Lycée Français Jean-Prince"
            : "Film annuel de l’orientation — 3e · Parcours Avenir";
        document.querySelectorAll(".route").forEach((section) => {
          section.classList.toggle("active", section.id === (route === ROUTES.HOME ? "route-home" : "route-3eme"));
        });
        document.querySelectorAll(".nav-link").forEach((link) => {
          const target = link.getAttribute("data-route");
          const current = route === ROUTES.HOME ? "home" : "3eme";
          if (target === current) {
            link.setAttribute("aria-current", "page");
          } else {
            link.removeAttribute("aria-current");
          }
        });
      }

      window.addEventListener("hashchange", () => navigate(window.location.hash));
      document.addEventListener("DOMContentLoaded", () => {
        setupOrientation();
        navigate(window.location.hash);
      });
    </script>
  </body>
</html>
